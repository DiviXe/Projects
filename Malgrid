import java.util.Random;
import java.util.Scanner;

// Malgrid version 0.12 
public class MalgridMenu {

	public static void main(String[] args) {
		Scanner in = new Scanner(System.in);
		Random rand = new Random();

		// enemies upcoming new enemies + stages on every stage about to appear
		String[] enemies = { "Imp", "Demon", "Zokzok", "Wulpera" };
		int MaxEnemyHealth = 75;
		int EnemyAttackDamage = 25;
		int expGain = 5;
		int EnemyCoins = 10000;
		int HitRate = 5;
		int stage = 1; // enemy stage gets higher per new round
		int killcount = 0;

		// player
		int level = 1;
		int Experience = 0;
		int Coins = 0;
		int health = 100;
		int attackDamage = 40;
		int numHealthPotions = 3;
		int DmgReduction = 5;
		int healthPotionHealAmount = 35;
		int healthPotionDropChance = 50;
		int LevelExp = 100;
		int Fish = 0;
		int Wood = 0;
		int Meat = 0;
		String Weapon = "Bronze";
		String Armor = "Bronze";
		String Leggins = "Bronze";
		String Helm = "Bronze";
		int RunChance = 50; // Needs to be implemented

		boolean gameRunning = true;
		System.out.println("Malgrid version 0.16");
		System.out.println("Welcome to the woods of Malgrid.");
		System.out.println("Discover the depts and World unknown beyond.");
		System.out.println("You ran to the woods and found something.");
		System.out.println("What could it be? You move deeper and encounter something evil.");

		// fighting part
		GAME: while (gameRunning) {
			System.out.println("-------------------------------------------------------");
			int enemyHealth = rand.nextInt(MaxEnemyHealth);
			int CoinsFromFight = rand.nextInt(EnemyCoins);
			int enemyExp = expGain + enemyHealth;
			String enemy = enemies[rand.nextInt(enemies.length)];
			System.out.println("\t# " + enemy + " appeared from the mist! #\n");

			while (enemyHealth > 0) {
				System.out.println("\tYour HP: " + health);
				System.out.println("\t" + enemy + "'s HP:" + enemyHealth);
				System.out.println("\n\t what option will you choose?");
				System.out.println("\t1.Attack");
				System.out.println("\t2.Drink health potion");
				System.out.println("\t3.Run");
				System.out.println("\t4.yell for someones help (coming soon)");
				System.out.println("\t5. run to the town nearby (coming soon)");

				String input = in.nextLine();
				if (input.equals("1")) {
					int DmgReductionAction = rand.nextInt(DmgReduction);
					int damageDealt = rand.nextInt(attackDamage);
					int damageTaken = rand.nextInt(EnemyAttackDamage);
					int Hit = rand.nextInt(HitRate);

					if (Hit == 1) {
						enemyHealth -= damageDealt;
						health -= damageTaken - DmgReductionAction;
						System.out.println("\t> You dealt " + damageDealt + " Damage to the " + enemy);
						System.out.println("\t>  you took some hit on your " + Armor + " armor for " + damageTaken
								+ " damage and your Armor resisted for (" + DmgReductionAction + ")");
					}

					else if (Hit == 2) {
						enemyHealth -= damageDealt;
						health -= damageTaken - DmgReductionAction;
						System.out.println("\t> You dealt " + damageDealt + " Damage to the " + enemy);
						System.out.println("\t>  you took some hit on your " + Leggins + " leggins for " + damageTaken
								+ " damage and your leggins resisted for (" + DmgReductionAction + ")");
					}

					else if (Hit == 3) {
						enemyHealth -= damageDealt;
						health -= damageTaken - DmgReductionAction;
						System.out.println("\t> You dealt " + damageDealt + " Damage to the " + enemy);
						System.out.println("\t>  you took some hit on your " + Helm + " helm for " + damageTaken
								+ " damage and your helm resisted for (" + DmgReductionAction + ")");
					}

					else {
						enemyHealth -= damageDealt;
						System.out.println("\t> You dealt " + damageDealt + " Damage to the " + enemy);
						System.out.println("\t> You managed to block the attack with your " + Weapon + " Greatsword!");

					}

					if (health <= 1) {
						System.out.println("\t> You are dead.");
						break;
					}
				} else if (input.equals("2")) {
					if (numHealthPotions > 0) {
						health += healthPotionHealAmount;
						numHealthPotions--;
						System.out.println("\t+You used an +health potion+ which healed you for "
								+ healthPotionHealAmount + "." + "\n\t You now have " + health + "HP."
								+ "\n\t You have " + numHealthPotions + " Health potions left in your bag.\n");
					} else {
						System.out.println("\t> You are out of luck, no potions left.");
					}
				}

				else if (input.equals("3")) {
					System.out.println("\t you ran away from the " + enemy + "!");
					continue GAME;

				} else if (input.equals("4")) {
					// implement helping mechanism
					System.out.println("\t Help! Anyone coming?");
					System.out.println("\t You yelled but it wasn't effective.");
					continue;

				} else if (input.equals("5")) {
					// implement running mechanism to the menu
					System.out.println("\t You are trying to run to the town. it didn't work.");
					break;

				} else {
					System.out.println("\tinput invalid!");

				}
			}
			if (health < 1) {
				System.out.println("----------------");
				System.out.println("You have died. ");
				System.out.println("----------------");
				System.out.println("Monster slain count: " + killcount);
				break;
			}
			//stage implementing work in progress (fully working 20 stages inc)
			if (stage >= 2) {
				String[] asd = { "Trihardo B0s" };
				enemies = asd;
			}
			Coins += CoinsFromFight;
			Experience += enemyExp;
			killcount++;
			stage++;
			System.out.println("-------------------------------------------------------");
			System.out.println(" # " + enemy + " Was defeated #");
			System.out.println(" # You have " + health + "HP left. # ");
			System.out.println(" # You gained " + enemyExp + " Experience. # ");
			System.out.println(" # You looted " + CoinsFromFight + " coins # ");
			System.out.println(" # You now have " + Coins + " coins # ");
			System.out.println(" # You now have " + Experience + " experience out of " + LevelExp + " # ");
			if (rand.nextInt(100) < healthPotionDropChance) {
				numHealthPotions++;
				System.out.println(" # You have received one health potion from the " + enemy + " # ");
				System.out.println(" # You now have " + numHealthPotions + " Health potions(s). # ");
			}
			if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 350;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 700;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 1200;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 2000;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 3200;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 4500;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 7600;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 12000;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience >= LevelExp) {
				level++;
				System.out.println("You are now level " + level + "!");
				LevelExp = 20000;
				attackDamage = attackDamage + 2;
				health = health + 25;
				System.out.println("Your attack damage is now " + attackDamage);
			}

			else if (Experience > LevelExp) {
				System.out.println("You are max level!");
			}
			// Options menu for shop, skilling, fighting and resources.
			System.out.println("-------------------------------------------------------");
			System.out.println("What would you like to do now?");
			System.out.println("1. Continue fighting");
			System.out.println("2. Do some skilling");
			System.out.println("3. Visit the shop");
			System.out.println("4. Cooking/camping");
			System.out.println("5. Show equipment and resources");
			System.out.println("6. Exit Game");

			String input = in.nextLine();

			while (!input.equals("1") && !input.equals("2") && !input.equals("3") && !input.equals("4")
					&& !input.equals("5") && !input.equals("6")) {
				System.out.println("Invalid command!");
				input = in.nextLine();

			}
			// Continue fight
			if (input.equals("1")) {
				System.out.println("You continue on your journey to the deep.");
				continue;
				// Skilling section
			} else if (input.equals("2")) {
				boolean Skilling = true;
				while (Skilling = true) {
					System.out.println(
							"You made it to the woods (1), which activity of skilling you would like to do? (certain areas has it's own ways to skill and resources) ");
					System.out.println("1. Fishing around the lake");
					System.out.println("2. set trap's in the forest");
					System.out.println("3. Chop some trees");
					System.out.println("4. Continue journey");
					input = in.nextLine();

					if (input.equals("1")) {
						System.out.println("-------------------------------------------------------");
						System.out.println("You start fish..");
						System.out.println("You managed to hook one fish! (Roll a number between 1-100)");
						int FishesInPond = 100;
						int FishingChance = rand.nextInt(FishesInPond);
						input = in.nextLine();
						if (FishingChance <= 50) {
							Fish = Fish + 1;
							System.out.println("You catched " + Fish + " fish.");
							continue;
						} else {
							System.out.println(
									"Luck is not on your side you didn't get any fish and the journey continues.");
							break;
						}
					} else if (input.equals("2")) {
						// trap function not working yet
						System.out.println("You set a few traps.. ");
					} else if (input.equals("3")) {
						// tree function not functioning
						System.out.println("You started to chop some trees.. ");
					} else if (input.equals("4")) {
						System.out.println("You continue to fight the bad side.");
						break;
					}
				}
				// shop section WORK IN PROGRESS 
			} else if (input.equals("3")) {
				boolean Shopping = true;
				while (Shopping = true) {
					System.out.println("-------------------------------------------------------");
					System.out.println("Welcome to the Willy's outpost!");
					System.out.println("-------------------------------------------------------");
					System.out.println("What can i do for ya?");
					System.out.println("1. Buy Health potion");
					System.out.println("2. Upgrade my weapon");
					System.out.println("3. Upgrade my armor");
					System.out.println("4. Upgrade my legs");
					System.out.println("5. Upgrade my helm");
					System.out.println("6. Leave the shop");
					input = in.nextLine();
					if (input.equals("1")) {
						System.out.println("That will be 50 coins for a health potion, deal or na? Y/N");
						input = in.nextLine();
						if (input.equals("y") && Coins >= 50) {
							Coins = Coins - 50;
							numHealthPotions++;
							System.out.println(
									"Thank you for your purchase, you now have " + numHealthPotions + " potions.");
						} else if (input.equals("y") && Coins <= 50) {
							System.out.println("You don't have enough money bro.");
						} else if (input.equals("n") && Coins <= 50) {
							System.out.println("See ya soon.");
							continue;
						} else {
							System.out.println("invalid command");
						}
					} else if (input.equals("2")) {
						if (Weapon == "Dragon") {
							System.out.println("Wow! You are wearing the dragon greatsword, i don't have any better weapon for you.");
							continue;
						}
						if (Weapon == "Rune") {
							System.out.println("That will be 3500 coins for an Dragon Greatsword, deal or na? Y/N");
							input = in.nextLine();
							if (input.equals("y") && Coins >= 3500) {
								Coins = Coins - 3500;
								Weapon = "Dragon";
								attackDamage = attackDamage + 35;
								System.out.println("Thank you for your purchase, you have upgraded your weapon to "
										+ Weapon + ".");
								continue;
							} else if (input.equals("y") && Coins <= 3500) {
								System.out.println("You don't have enough money for this weapon.");
								continue;
							} else if (input.equals("n") && Coins <= 3500) {
								System.out.println("See ya soon.");
								continue;
							} else {
								System.out.println("invalid command");
							}
						}
						if (Weapon == "Adamant") {
							System.out.println("That will be 1300 coins for an Rune Greatsword, deal or na? Y/N");
							input = in.nextLine();
							if (input.equals("y") && Coins >= 1300) {
								Coins = Coins - 1300;
								Weapon = "Rune";
								attackDamage = attackDamage + 26;
								System.out.println("Thank you for your purchase, you have upgraded your weapon to "
										+ Weapon + ".");
								continue;
							} else if (input.equals("y") && Coins <= 1300) {
								System.out.println("You don't have enough money for this weapon.");
								continue;
							} else if (input.equals("n") && Coins <= 1300) {
								System.out.println("See ya soon.");
								continue;
							} else {
								System.out.println("invalid command");
							}
						}
						if (Weapon == "Mithril") {
							System.out.println("That will be 700 coins for an Adamant Greatsword, deal or na? Y/N");
							input = in.nextLine();
							if (input.equals("y") && Coins >= 700) {
								Coins = Coins - 700;
								Weapon = "Adamant";
								attackDamage = attackDamage + 18;
								System.out.println("Thank you for your purchase, you have upgraded your weapon to "
										+ Weapon + ".");
								continue;
							} else if (input.equals("y") && Coins <= 700) {
								System.out.println("You don't have enough money for this weapon.");
								continue;
							} else if (input.equals("n") && Coins <= 700) {
								System.out.println("See ya soon.");
								continue;
							} else {
								System.out.println("invalid command");
							}
						}
						if (Weapon == "Steel") {
							System.out.println("That will be 250 coins for an Mitril Greatsword, deal or na? Y/N");
							input = in.nextLine();
							if (input.equals("y") && Coins >= 250) {
								Coins = Coins - 250;
								Weapon = "Mithril";
								attackDamage = attackDamage + 12;
								System.out.println("Thank you for your purchase, you have upgraded your weapon to "
										+ Weapon + ".");
								continue;
							} else if (input.equals("y") && Coins <= 250) {
								System.out.println("You don't have enough money for this weapon.");
								continue;
							} else if (input.equals("n") && Coins <= 250) {
								System.out.println("See ya soon.");
								continue;
							} else {
								System.out.println("invalid command");
							}
						}
						if (Weapon == "Iron") {
							System.out.println("That will be 85 coins for an Steel Greatsword, deal or na? Y/N");
							input = in.nextLine();
							if (input.equals("y") && Coins >= 85) {
								Coins = Coins - 35;
								Weapon = "Steel";
								attackDamage = attackDamage + 6;
								System.out.println("Thank you for your purchase, you have upgraded your weapon to "
										+ Weapon + ".");
								continue;
							} else if (input.equals("y") && Coins <= 85) {
								System.out.println("You don't have enough money for this weapon.");
								continue;
							} else if (input.equals("n") && Coins <= 85) {
								System.out.println("See ya soon.");
								continue;
							} else {
								System.out.println("invalid command");
							}
						}
						System.out.println("That will be 35 coins for an Iron Greatsword, deal or na? Y/N");
						input = in.nextLine();
						if (input.equals("y") && Coins >= 35) {
							Coins = Coins - 35;
							Weapon = "Iron";
							attackDamage = attackDamage + 3;
							System.out.println(
									"Thank you for your purchase, you have upgraded your weapon to " + Weapon + ".");
							continue;
						} else if (input.equals("y") && Coins <= 35) {
							System.out.println("You don't have enough money for this weapon.");
							continue;
						} else if (input.equals("n") && Coins <= 35) {
							System.out.println("See ya soon.");
						} else {
							System.out.println("invalid command");
						}
					} else if (input.equals("3")) {
						System.out.println("That will be 30 coins for an Iron Armor, deal or na? Y/N");
						input = in.nextLine();
						if (input.equals("y") && Coins >= 30) {
							Coins = Coins - 30;
							Armor = "Iron";
							DmgReduction = DmgReduction + 5;
							System.out.println(
									"Thank you for your purchase, you have upgraded your weapon to " + Weapon + ".");
						} else if (input.equals("y") && Coins <= 30) {
							System.out.println("You don't have enough money for this weapon.");
							continue;
						} else if (input.equals("n") && Coins <= 30) {
							System.out.println("See ya soon.");
							continue;
						} else {
							System.out.println("invalid command");
						}

					} else if (input.equals("4")) {
						System.out.println("That will be 25 coins for an Iron Leggins, deal or na? Y/N");
						input = in.nextLine();
						if (input.equals("y") && Coins >= 25) {
							Coins = Coins - 25;
							Leggins = "Iron";
							DmgReduction = DmgReduction + 3;
							System.out.println(
									"Thank you for your purchase, you have upgraded your weapon to " + Weapon + ".");
						} else if (input.equals("y") && Coins <= 25) {
							System.out.println("You don't have enough money for this weapon.");
							continue;
						} else if (input.equals("n") && Coins <= 25) {
							System.out.println("See ya soon.");
							continue;
						} else {
							System.out.println("invalid command");
						}
					} else if (input.equals("5")) {
						System.out.println("That will be 20 coins for an Iron Helm, deal or na? Y/N");
						input = in.nextLine();
						if (input.equals("y") && Coins >= 20) {
							Coins = Coins - 20;
							Helm = "Iron";
							DmgReduction = DmgReduction + 2;
							System.out.println(
									"Thank you for your purchase, you have upgraded your weapon to " + Weapon + ".");
						} else if (input.equals("y") && Coins <= 20) {
							System.out.println("You don't have enough money for this weapon.");
							continue;
						} else if (input.equals("n") && Coins <= 20) {
							System.out.println("See ya soon.");
							continue;
						} else {
							System.out.println("invalid command");
						}
					} else if (input.equals("6")) {
						System.out.println("Stay safe out there and see you again!");
						break;
					} else {
						System.out.println("Invalid command");
					}

				}
			} else if (input.equals("4")) {
				System.out.println("Cooking coming soon "); // implement phase
			} else if (input.equals("5")) {
				System.out.println("########################");
				System.out.println("Your level is " + level);
				System.out.println("########################");
				System.out.println("Your helm is: " + Helm);
				System.out.println("Your Armor is: " + Armor);
				System.out.println("Your Legs is: " + Leggins);
				System.out.println("Your sword is: " + Weapon);
				System.out.println("Your attack damage is: " + attackDamage);
				System.out.println("Your damage reduction is " + DmgReduction);
				System.out
						.println("You have currently have " + Fish + " fish, " + Wood + " wood and " + Meat + " meat.");
			} else if (input.equals("6")) {
				System.out.println("You exit the dungeon but there's still so much to do. ");
				break;
			}
		}

		System.out.println("###########################################");
		System.out.println("Thank you for playing!");
		System.out.println("############################################");
		System.out.println("Made by LA");
		// dmg done, hp healed etc the end screen

	}

}
